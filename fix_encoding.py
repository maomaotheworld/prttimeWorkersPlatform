# -*- coding: utf-8 -*-
import re

# 讀取檔案
with open('frontend/src/App.vue', 'r', encoding='utf-8') as f:
    content = f.read()

# 定義所有需要修復的編碼對應關係
replacements = {
    # 基本文字
    '工�??�': '工讀生',
    '管�?': '管理',
    '?��?': '薪資',
    '?�卡': '打卡',
    '?�出': '登出',
    '?�戶': '用戶',
    '?�知': '未知',
    '統�?': '統計',
    '資�?': '資訊',
    '彈�?': '彈窗',
    '小�?': '小組',
    '總�??�': '總組別',
    '組別': '組別',
    '活�??��?': '活動資料',
    '首�?': '首頁',
    '工�?': '工時',
    '記�?': '記錄',
    '內容�???': '內容區域',
    '?��?端�???': '底部區域',
    '?��?端�??��???': '底部區域結束',
    '導航': '導航',
    '?��?導航': '側邊導航',
    '?��?端�????��?權�??��??�濾)': '底部端點配置(需要權限過濾)',
    '如�??��??�管?�員?�選??檢查?�否?�管?�員': '如果需要管理員選項,檢查是否為管理員',
    '如�??��??��?�?檢查權�?': '如果需要權限,檢查權限',
    '?�出?��?': '登出操作',
    '?�戶角色顯示': '用戶角色顯示',
    '小時': '小時',
    '總工讀?�數': '總工讀生數',
    '今日?�卡': '今日打卡',
    '?��?工�?': '本月工時',
    '如�??�登?��??': '如果是登入頁面',
    '主�??��??': '主應用區域',
    '?�部導航': '頂部導航',
    '工�??�管?�平??': '工讀生管理平台',
    
    # 特殊模式 - 處理多個連續亂碼
    '管??': '管理',
    '??': '',  # 移除多餘的問號
    '�': '',   # 移除替換字符
}

print("原始檔案大小:", len(content), "字元")
print("開始修復編碼問題...")

# 先處理較長的模式
sorted_replacements = sorted(replacements.items(), key=lambda x: len(x[0]), reverse=True)

for old, new in sorted_replacements:
    if old in content:
        count = content.count(old)
        content = content.replace(old, new)
        print(f"替換 '{old}' -> '{new}': {count} 次")

# 寫回檔案
with open('frontend/src/App.vue', 'w', encoding='utf-8') as f:
    f.write(content)

print("\n修復完成!")
print("修復後檔案大小:", len(content), "字元")
